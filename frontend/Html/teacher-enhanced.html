<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Teacher Registration</title>
  <link rel="stylesheet" href="../css/style.css">
  <link rel="stylesheet" href="../css/teacher-enhanced.css">
</head>
<body>
 <nav class="navbar">
  <div class="logo">
    <a href="index.html">
      <img src="../images/logo3.jpg" alt="HomeTuition Logo" class="logo-img">
    </a>
  </div>
  <ul class="nav-links">
    <li><a href="index.html">Home</a></li>
    <li><a href="about.html">About</a></li>
    <li><a href="student.html">Student</a></li>
    <li><a href="teacher-enhanced.html" class="active">Teacher</a></li>
    <li><a href="contact.html">Contact</a></li>
    <li><a href="adminlogin.html">Admin</a></li>
  </ul>
  <div class="hamburger" onclick="toggleMenu()">
    <span></span>
    <span></span>
    <span></span>
  </div>
</nav>

<main>
  <h2 class="form-title">üë®‚Äçüè´ Teacher Registration Form</h2>
  <p class="form-subtitle">Join our HomeTuition platform and start teaching students in your area.</p>

  <!-- Progress Indicator -->
  <div class="progress-container">
    <div class="progress-bar">
      <div class="progress-step active"></div>
      <div class="progress-step"></div>
      <div class="progress-step"></div>
      <div class="progress-step"></div>
      <div class="progress-step"></div>
      <div class="progress-step"></div>
      <div class="progress-step"></div>
      <div class="progress-step"></div>
      <div class="progress-step"></div>
      <div class="progress-step"></div>
    </div>
  </div>

  <form class="form" id="teacher-form">
    <!-- Personal Information -->
    <div class="form-row">
      <div class="form-group">
        <label><i class="icon-user"></i>Full Name</label>
        <input type="text" id="teacher-name" placeholder="Enter your name" required>
        <small class="hint">Enter your full name (at least 3 characters)</small>
      </div>

      <div class="form-group">
        <label><i class="icon-phone"></i>Phone</label>
        <input type="text" id="teacher-phone" placeholder="Enter your phone number" required>
        <small class="hint">10-digit Indian phone number (must start with 6,7,8,9)</small>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label><i class="icon-email"></i>Email</label>
        <input type="email" id="teacher-email" placeholder="Enter your email" required>
        <small class="hint">Enter a valid email (e.g. abc@gmail.com)</small>
      </div>

      <div class="form-group">
        <label><i class="icon-location"></i>Address</label>
        <input type="text" id="teacher-address" placeholder="Enter your address" required>
        <small class="hint">Enter your complete address</small>
      </div>
    </div>

    <!-- Professional Information -->
    <div class="form-row">
      <div class="form-group">
        <label><i class="icon-graduation"></i>Qualifications</label>
        <input type="text" id="teacher-qualifications" placeholder="Enter your qualifications" required>
        <div class="qualification-badges" id="qualification-badges">
          <span class="qualification-badge">B.Ed</span>
          <span class="qualification-badge">M.Ed</span>
          <span class="qualification-badge">PhD</span>
        </div>
        <small class="hint">Example: B.Sc, M.Sc, B.Ed etc.</small>
      </div>

      <div class="form-group">
        <label><i class="icon-book"></i>Subject of Teaching</label>
        <input type="text" id="teacher-subject" placeholder="Enter subject you teach" required>
        <div class="subject-tags" id="subject-tags">
          <span class="subject-tag">Mathematics</span>
          <span class="subject-tag">Physics</span>
          <span class="subject-tag">Chemistry</span>
        </div>
        <small class="hint">Example: Math, Physics, English</small>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label><i class="icon-briefcase"></i>Experience (years)</label>
        <input type="number" id="teacher-experience" placeholder="Enter years of experience" required>
        <div class="experience-indicator">
          <div class="experience-bar">
            <div class="experience-fill" id="experience-fill"></div>
          </div>
          <span id="experience-text" style="color: rgba(255,255,255,0.7); font-size: 0.9rem;">0 years</span>
        </div>
        <small class="hint">Enter number of years (0 if fresher)</small>
      </div>

      <div class="form-group">
        <label><i class="icon-graduation"></i>Class of Teaching</label>
        <input type="text" id="teacher-class" placeholder="Enter class you teach" required>
        <small class="hint">Example: Class 6-10 or Class 11-12</small>
      </div>
    </div>

    <div class="form-row">
      <div class="form-group">
        <label><i class="icon-building"></i>Working in any school</label>
        <input type="text" id="teacher-school" placeholder="Enter school name if working" required>
        <small class="hint">Enter school name (or write "No" if not working)</small>
      </div>

      <div class="form-group">
        <label><i class="icon-map"></i>Preferred Location for Teaching (Patna)</label>
        <select id="teacher-area" required>
          <option value="">-- Select Area --</option>
          <option value="Boring Road">Boring Road</option>
          <option value="Kankarbagh">Kankarbagh</option>
          <option value="Patliputra">Patliputra</option>
          <option value="Rajendra Nagar">Rajendra Nagar</option>
          <option value="Fraser Road">Fraser Road</option>
          <option value="Ashok Rajpath">Ashok Rajpath</option>
          <option value="Gandhi Maidan">Gandhi Maidan</option>
          <option value="Bailey Road">Bailey Road</option>
          <option value="Digha">Digha</option>
          <option value="Anisabad">Anisabad</option>
          <option value="Phulwari Sharif">Phulwari Sharif</option>
          <option value="Danapur">Danapur</option>
          <option value="Saguna More">Saguna More</option>
          <option value="Other">Other</option>
        </select>
        <small class="hint">Choose your preferred area for teaching</small>
      </div>
    </div>

    <button type="submit" class="btn primary">üöÄ Join as Teacher</button>
    <div id="form-message" class="message"></div>
  </form>
</main>

<footer>
  <p>¬© 2025 HomeTuition | Made with ‚ù§Ô∏è</p>
</footer>

<script>
  // Experience bar animation
  document.getElementById('teacher-experience').addEventListener('input', function() {
    const experience = parseInt(this.value) || 0;
    const fill = document.getElementById('experience-fill');
    const text = document.getElementById('experience-text');

    const maxExperience = 20; // Maximum experience for the bar
    const percentage = Math.min((experience / maxExperience) * 100, 100);

    fill.style.width = percentage + '%';
    text.textContent = experience + ' years';

    // Change color based on experience
    if (experience >= 15) {
      fill.style.background = 'linear-gradient(90deg, #27ae60, #2ecc71)';
    } else if (experience >= 10) {
      fill.style.background = 'linear-gradient(90deg, #f39c12, #e67e22)';
    } else if (experience >= 5) {
      fill.style.background = 'linear-gradient(90deg, #3498db, #2980b9)';
    } else {
      fill.style.background = 'linear-gradient(90deg, #95a5a6, #7f8c8d)';
    }
  });

  document.getElementById('teacher-form').addEventListener('submit', async (e) => {
    e.preventDefault();

    const name = document.getElementById('teacher-name').value.trim();
    const phone = document.getElementById('teacher-phone').value.trim();
    const email = document.getElementById('teacher-email').value.trim();
    const address = document.getElementById('teacher-address').value.trim();
    const qualifications = document.getElementById('teacher-qualifications').value.trim();
    const subject = document.getElementById('teacher-subject').value.trim();
    const experience = parseInt(document.getElementById('teacher-experience').value) || 0;
    const classOfTeaching = document.getElementById('teacher-class').value.trim();
    const workingSchool = document.getElementById('teacher-school').value.trim();
    const preferredLocation = document.getElementById('teacher-area').value;

    // VALIDATION
    if (name.length < 3) {
      showMessage("Name must be at least 3 characters long.", "error");
      return;
    }
    if (!/^[6-9]\d{9}$/.test(phone)) {
      showMessage("Enter a valid 10-digit Indian phone number.", "error");
      return;
    }
    if (!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email)) {
      showMessage("Enter a valid email address.", "error");
      return;
    }
    if (address.length < 5) {
      showMessage("Address must be at least 5 characters long.", "error");
      return;
    }
    if (qualifications.length < 2) {
      showMessage("Please enter valid qualifications.", "error");
      return;
    }
    if (subject.length < 2) {
      showMessage("Please enter a valid subject.", "error");
      return;
    }
    if (experience < 0) {
      showMessage("Experience cannot be negative.", "error");
      return;
    }
    if (classOfTeaching.length < 1) {
      showMessage("Please enter the class you teach.", "error");
      return;
    }
    if (workingSchool.length < 2) {
      showMessage("Enter valid school name or write 'No'.", "error");
      return;
    }
    if (!preferredLocation) {
      showMessage("Please select a preferred teaching location.", "error");
      return;
    }

    const data = {
      name, phone, email, address, qualifications, subject,
      experience, classOfTeaching, workingSchool, preferredLocation
    };

    try {
      const res = await fetch('https://home-tuition-truelearning-2hcl.onrender.com/api/register/teacher', {
        method: 'POST',
        headers: { 'Content-Type': 'application/json' },
        body: JSON.stringify(data)
      });

      const json = await res.json();
      if (res.ok) {
        showMessage(json.message, "success");
        e.target.reset();
        document.getElementById('experience-fill').style.width = '0%';
        document.getElementById('experience-text').textContent = '0 years';
      } else {
        showMessage(json.message || 'Error registering teacher', "error");
      }
    } catch (err) {
      console.error(err);
      showMessage('Server error', "error");
    }
  });

  function showMessage(text, type) {
    const messageDiv = document.getElementById('form-message');
    messageDiv.textContent = text;
    messageDiv.className = `message ${type}`;
    messageDiv.style.display = 'block';

    setTimeout(() => {
      messageDiv.style.display = 'none';
    }, 5000);
  }
</script>

<script src="../javascript/script.js"></script>
</body>
</html>
